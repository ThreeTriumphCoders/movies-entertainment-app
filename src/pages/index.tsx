import { useQuery } from '@tanstack/react-query';
import { type NextPage } from 'next';
import Head from 'next/head';
import { MoviesList } from '~/components/MoviesList';
import { TrendingList } from '~/components/TrendingList';
import { Category } from '~/types/Category.enum';
import { getPopular } from '~/utils/helpers';

const Home: NextPage = () => {
  const { data: popularMovies = [] } = useQuery({
    queryKey: ['popularMovies'],
    queryFn: () => getPopular(1, Category.MOVIE),
  });

  const { data: popularSeries = [] } = useQuery({
    queryKey: ['popularSeries'],
    queryFn: () => getPopular(1, Category.TV),
  });

  return (
    <>
      <Head>
        <title>Movies Entertainment</title>
        <meta name="description" content="Generated by create-t3-app" />
        <link rel="icon" href="/favicon.ico" />
      </Head>

      <TrendingList />

      <MoviesList
        movies={popularMovies.slice(0, 12)}
        title="Popular movies"
        category={Category.MOVIE}
      />

      <MoviesList
        movies={popularSeries.slice(0, 12)}
        title="Popular series"
        category={Category.TV}
      />
    </>
  );
};

export default Home;
